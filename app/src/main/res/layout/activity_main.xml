<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="?attr/appBackgroundColor">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingBottom="24dp"
        tools:context=".ActivityMain">

        <!-- Pill Header -->
        <LinearLayout style="@style/PillHeader">
            <TextView
                style="@style/PillHeaderTitle"
                android:text="@string/app_name" />
            <TextView
                android:id="@+id/tv_version"
                style="@style/PillHeaderSubtitle"
                android:text="K12KB Version: unversioned" />
        </LinearLayout>

        <!-- SETUP section -->
        <TextView
            android:id="@+id/section_setup"
            style="@style/SectionHeader"
            android:text="SETUP" />

        <!-- Hint box (moves to top when permissions visible, bottom when hidden) -->
        <TextView
                android:id="@+id/tv_initial_hint"
                style="@style/GreenHintBox"
                android:text="@string/pref_first_install" />

        <LinearLayout style="@style/ItemPill">
            <Button
                android:id="@+id/btn_settings"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_settings"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <LinearLayout style="@style/ItemPill"
            android:id="@+id/pill_sys_kb_setting">
            <Button
                android:id="@+id/btn_sys_kb_setting"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_sys_kb_setting_enabled"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <LinearLayout style="@style/ItemPill"
            android:id="@+id/pill_sys_kb_accessibility_setting">
            <Button
                android:id="@+id/btn_sys_kb_accessibility_setting"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_sys_kb_accessibility_setting_enabled"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <LinearLayout style="@style/ItemPill"
            android:id="@+id/pill_sys_phone_permission">
            <Button
                android:id="@+id/btn_sys_phone_permission"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_sys_phone_permission_activated"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <LinearLayout style="@style/ItemPill"
            android:id="@+id/pill_power_manager">
            <Button
                android:id="@+id/btn_power_manager"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_power_manager_activated"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <LinearLayout style="@style/ItemPill"
            android:id="@+id/pill_file_permissions">
            <Button
                android:id="@+id/btn_file_permissions"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_file_permissions_not_need"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <!-- Suggestions (dynamically positioned after last visible permission or after Settings) -->
        <LinearLayout style="@style/ItemPill"
            android:id="@+id/pill_prediction_settings">
            <Button
                android:id="@+id/btn_prediction_settings"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_prediction_settings"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <!-- Advanced Settings (dynamically positioned with Suggestions) -->
        <LinearLayout style="@style/ItemPill"
            android:id="@+id/pill_more_settings">
            <Button
                android:id="@+id/btn_more_settings"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_more_settings"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <!-- ACTIONS section -->
        <TextView
            android:id="@+id/section_actions"
            style="@style/SectionHeader"
            android:text="ACTIONS" />

        <LinearLayout style="@style/ItemPill">
            <Button
                android:id="@+id/btn_keyboard_reload"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_keyboard_reload"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <LinearLayout style="@style/ItemPill">
            <Button
                android:id="@+id/btn_accessibility_reload"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_accessibility_reload"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <LinearLayout style="@style/ItemPill">
            <Button
                android:id="@+id/btn_test_key"
                style="@style/ItemPillText"
                android:background="@android:color/transparent"
                android:gravity="start|center_vertical"
                android:text="@string/main_btn_test_keyboard"
                android:textColor="?attr/textPrimaryColor"
                android:textAllCaps="false" />
            <TextView style="@style/Chevron" android:text="\u203A" />
        </LinearLayout>

        <!-- OTHERS section -->
        <TextView
                android:id="@+id/section_others"
                style="@style/SectionHeader"
                android:text="OTHERS" />

        <!-- Granted permissions collapsible group -->
        <LinearLayout
            android:id="@+id/granted_group"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="gone">

            <!-- Header pill (clickable to toggle) -->
            <LinearLayout
                android:id="@+id/granted_group_header"
                style="@style/ItemPill"
                android:background="@drawable/bg_granted_group_header">
                <TextView
                    android:id="@+id/granted_group_title"
                    style="@style/ItemPillText"
                    android:textColor="?attr/grantedHeaderTextColor"
                    android:text="@string/main_granted_permissions" />
                <TextView
                    android:id="@+id/granted_group_count"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="?attr/grantedHeaderTextColor"
                    android:textSize="13sp"
                    android:layout_marginEnd="6dp" />
                <TextView
                    android:id="@+id/granted_group_chevron"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="?attr/grantedHeaderChevronColor"
                    android:textSize="14sp"
                    android:text="\u25BC" />
            </LinearLayout>

            <!-- Container for granted pill items (hidden by default) -->
            <LinearLayout
                android:id="@+id/granted_group_items"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="gone" />
        </LinearLayout>

        <!-- Language switcher (bottom position) -->
        <LinearLayout
            android:id="@+id/pill_language_switcher"
            style="@style/ItemPillSpinner"
            android:layout_marginTop="10dp">
            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="?attr/textPrimaryColor"
                android:textSize="15sp"
                android:layout_marginBottom="4dp"
                android:text="@string/main_interface_language" />
            <Spinner
                android:id="@+id/spinner_interface_language"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
        </LinearLayout>

        <!-- Manual -->
        <TextView
            android:id="@+id/manual_text"
            style="@style/ManualTitle"
            android:text="@string/main_manual_text" />

        <TextView
            android:id="@+id/text_manual_link"
            style="@style/ManualLink"
            android:text="@string/main_manual_link" />

    </LinearLayout>
</ScrollView>
